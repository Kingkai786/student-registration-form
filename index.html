<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

  <style>
    .font {
      font-family: cursive;
    }
    

    body {
      background-color: #6b6d6d;
    }
  </style>
  <title>Student Registration form</title>

</head>

<body>
  <div class="container">
    <h1 class="text-center font">Welcome to Registration Form</h1>
  </div>

  <div class="container mt-4 ">
    <div class="card bg-dark text-white">
      <div class="card-header text-center">
        <h3 class="font">Student Registration Form</h3>
      </div>
      <div class="card-body">
        <div class="container border  p-4">
          <form>
            <div class="row mb-3">
              <label for="name" class="col-sm-2 col-form-label">Name</label>
              <div class="col-sm-10">
                <input type="name" class="form-control text-white bg-dark" id="name" placeholder="Enter your Name">
              </div>
            </div>
            <div class="row mb-3">
              <label for="roll" class="col-sm-2 col-form-label">Roll no</label>
              <div class="col-sm-10">
                <input type="number" class="form-control text-white bg-dark" id="roll"
                  placeholder="Enter your roll no.">
              </div>
            </div>
            <div class="row mb-3">
              <label for="Division" class="col-sm-2 col-form-label">Division</label>
              <div class="col-sm-4">
                <select id="div" class="form-select bg-dark text-white" aria-label="Default select example">
                  <option selected>Select the Division</option>
                  <option value="A">A</option>
                  <option value="B">B</option>
                  <option value="C">C</option>
                </select>
              </div>
            </div>
            <div class="row mb-3">
              <legend class="col-form-label col-sm-2 pt-0">Gender</legend>
              <div class="col-sm-10">
                <div id="gender" class="form-check form-check-inline">
                  <input id="g1" class="form-check-input bg-secondary" type="radio" name="gender" id="inlineRadio1"
                    value="Male">
                  <label class="form-check-label" for="inlineRadio1">Male</label>
                </div>
                <div class="form-check form-check-inline">
                  <input id="g2" class="form-check-input bg-secondary" type="radio" name="gender" id="inlineRadio2"
                    value="Female">
                  <label class="form-check-label" for="inlineRadio2">Female</label>
                </div>
              </div>
            </div>
            <div class=" mb-3 table-responsive-sm fixed-table-body">
              <table class="table table-sm  table-hover table-dark">
                <thead >
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Subject</th>
                    <th scope="col">Marks</th>
                    <th scope="col">Out of</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row">1</th>
                    <td>Physics</td>
                    <td><input class="bg-dark text-white border-light" type="number" name="" id="ph">
                    </td>
                    <td>100</td>
                  </tr>
                  <tr>
                    <th scope="row">2</th>
                    <td>Maths</td>
                    <td><input class="bg-dark text-white border-light" type="number" name="" id="mt">
                    </td>
                    <td>100</td>
                  </tr>
                  <tr>
                    <th scope="row">3</th>
                    <td>Chemistry</td>
                    <td><input class="bg-dark text-white border-light" type="number" name="" id="cm">
                    </td>
                    <td>100</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class=" d-flex justify-content-center row mb-3">
              <button type="button" id="add" value="average"
                class=" col-sm-2 btn btn-md btn-secondary bg-gradient">Submit</button>
            </div>
          </form>
        </div>

      </div>
    </div>
  </div>
  <div class="container mt-4 ">
    <div class="card bg-dark ">
      <div class="card-header text-center text-white">
        <h3 class="font">Student Information</h3>
      </div>
      <div class="card-body table-responsive-sm fixed-table-body">
        <table class="table table-sm table-dark table-hover">
          <thead>
            <tr>
              <th scope="col">Name</th>
              <th scope="col">Roll no.</th>
              <th scope="col">Division</th>
              <th scope="col">Gender</th>
              <th scope="col">Total marks</th>
              <th scope="col">Average</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody id="tbody">
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>






  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
    crossorigin="anonymous"></script>
  <script>
    function average() {
      p = parseInt(document.getElementById("ph").value)
      m = parseInt(document.getElementById("mt").value)
      c = parseInt(document.getElementById("cm").value)

      name = document.getElementById("name").value
      roll = document.getElementById("roll").value
      div = document.getElementById("div").value
      total = p + m + c;
      avg = total / 3


      if (document.getElementById('g1').checked) {
        gen = document.getElementById('g1').value
      } else {

        gen = document.getElementById('g2').value
      }

      // gender = document.getElementById("gender").value

      if (localStorage.getItem('itemsJson') == null) {
        itemJsonArray = [];
        itemJsonArray.push([name, roll, div, gen, total, avg]);
        localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray))
      }
      else {
        itemJsonArrayStr = localStorage.getItem('itemsJson')
        itemJsonArray = JSON.parse(itemJsonArrayStr);
        itemJsonArray.push([name, roll, div, gen, total, avg]);
        localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray))
      }

      update()

      // document.getElementById("nm").innerHTML = name;
      // document.getElementById("no").innerHTML = roll;
      // document.getElementById("dv").innerHTML = div;

      // if (document.getElementById('g1').checked){
      //   document.getElementById("gen").innerHTML = document.getElementById('g1').value
      // }
      // if (document.getElementById('g2').checked){
      //   document.getElementById("gen").innerHTML = document.getElementById('g2').value
      // }

      // av = p+m+c;
      // document.getElementById("avg").innerHTML = av/3 ;
      // document.getElementById("marks").innerHTML = av ;
    }

    function update() {
      if (localStorage.getItem('itemsJson') == null) {
        itemJsonArray = [];
        localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray))
      }
      else {
        itemJsonArrayStr = localStorage.getItem('itemsJson')
        itemJsonArray = JSON.parse(itemJsonArrayStr);
      }
      let tableBody = document.getElementById("tbody");
      let str = "";
      itemJsonArray.forEach((element, index) => {
        str += `
                <tr>
                <th scope="row">${element[0]}</th>
                <td>${element[1]}</td>
                <td>${element[2]}</td> 
                <td>${element[3]}</td> 
                <td>${element[4]}</td> 
                <td>${element[5]}</td> 
                <td><button class="btn btn-sm btn-secondary bg-gradient" onclick="deleted(${index})">Delete</button></td> 
                </tr>`;
      });
      tableBody.innerHTML = str;

    }
    add = document.getElementById("add");
    add.addEventListener("click", average);
    update();
    function deleted(itemIndex) {
      console.log("Delete", itemIndex);
      itemJsonArrayStr = localStorage.getItem('itemsJson')
      itemJsonArray = JSON.parse(itemJsonArrayStr);
      // Delete itemIndex element from the array
      itemJsonArray.splice(itemIndex, 1);
      localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray));
      update();

    }
  </script>
</body>

</html>